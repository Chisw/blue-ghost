<!DOCTYPE html>
<html>
  <head>
    <title>Blue Ghost Popup</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="../static/css/tailwind.min.css" />
    <link rel="stylesheet" type="text/css" href="../static/css/element.min.css" />
    <link rel="stylesheet" type="text/css" href="./style.css" />
  </head>
  <body>
    <div id="blue-ghost-popup" style="width:480px;">
      <el-tabs type="border-card">

        <el-tab-pane>
          <span slot="label"><i class="el-icon-star-off"></i> 书签</span>
          <div>
            <el-input
              autofocus
              size="small"
              placeholder="请输入站点名称、拼音、拼音首字母"
              v-model="bookmarkValue"
            >
              <i class="el-icon-search" slot="prepend"></i>
            </el-input>
            <div class="mt-4 -mx-4 -mb-4 h-64 overflow-x-hidden overflow-y-auto">
              <div v-if="displayBookmarks.length === 0" class="p-4 text-gray-600 text-center">
                没有匹配到书签
              </div>
              <a
                target="_blank"
                class="block px-4 py-1 hover:text-blue-600 hover:bg-gray-100 focus:bg-gray-300 focus:outline-none border-t"
                v-for="(bookmark, index) in displayBookmarks"
                :key="index"
                :href="bookmark.url"
              >
                <div class="flex items-center">
                  <img
                    class="block w-4 h-4"
                    :src="`chrome://favicon/size/16@2x/${bookmark.url}`"
                  />
                  <div class="ml-4">
                    <span class="font-semibold">{{bookmark.title}}</span>
                    <p class="text-gray-500">{{bookmark.url}}</p>
                  </div>
                </div>
              </a>
            </div>
          </div>
        </el-tab-pane>

        <el-tab-pane>
          <span slot="label"><i class="el-icon-monitor"></i> 站点</span>
          <div class="flex items-center">
            <img class="w-5 h-5" :src="site.favIconUrl || '../img/icon.svg'" />
            <el-input size="small" class="flex-grow ml-2" v-model="site.title" placeholder="Site title" />
          </div>
          <p class="mt-2 text-xs text-gray-500 truncate">{{site.url}}</p>
          <div class="mt-2 flex items-center">
            <div class="flex-grow mr-4">
              <el-alert v-if="site.url.length > 512" :closable="false" title="URL is too long" type="error"></el-alert>
            </div>
            <el-button round size="mini" type="primary" icon="el-icon-upload" @click="pickSite()" :disabled="pickSiteDisabled">
              Pick
            </el-button>
          </div>
        </el-tab-pane>

        <el-tab-pane>
          <span slot="label"><i class="el-icon-setting"></i> 配置</span>
          <div>
            <el-input size="small" v-model="config.api" placeholder="API url">
              <template slot="prepend">API</template>
            </el-input>
            <el-input size="small" v-model="config.token" placeholder="Token code" type="password" class="mt-2">
              <template slot="prepend">Token</template>
            </el-input>
            <el-input size="small" v-model="config.newTab" placeholder="New tab url" class="mt-2">
              <template slot="prepend">NewTab</template>
            </el-input>
            <div class="mt-2 flex justify-end">
              <el-button round size="mini" type="primary" icon="el-icon-refresh" @click="updateConfig()" :disabled="updateConfigDisabled">
                Update
              </el-button>
            </div>
          </div>
        </el-tab-pane>

      </el-tabs>

      <div class="absolute top-0 right-0 p-2">
        <el-tooltip effect="dark" content="Reload Blue Ghost" placement="bottom">
          <el-button
            circle
            size="mini"
            icon="el-icon-refresh-left"
            @click="reloadBlueGhost"
          >
          </el-button>
        </el-tooltip>
      </div>

    </div>
  </body>
  <script src="../static/js/luxon.min.js"></script>
  <script src="../static/js/vue.min.js"></script>
  <script src="../static/js/element.min.js"></script>
  <script src="../static/js/pinyin.js"></script>
  <script src="./popup.js"></script>
</html>